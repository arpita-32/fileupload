{"version":3,"sources":["File.js"],"names":["mongoose","require","nodemailer","fileSchema","Schema","name","type","String","required","imageUrl","tags","email","post","doc","console","log","transporter","createTransport","host","process","env","MAIL_HOST","auth","user","MAIL_USER","pass","MAIL_PASS","sendMail","from","to","subject","html","info","error","File","model","module","exports"],"mappings":";;AAAA,IAAMA,QAAQ,GAAGC,OAAO,CAAC,UAAD,CAAxB;;AACA,IAAMC,UAAU,GAAGD,OAAO,CAAC,YAAD,CAA1B;;AAGA,IAAME,UAAU,GAAG,IAAIH,QAAQ,CAACI,MAAb,CAAoB;AACnCC,EAAAA,IAAI,EAAC;AACDC,IAAAA,IAAI,EAACC,MADJ;AAEDC,IAAAA,QAAQ,EAAC;AAFR,GAD8B;AAKnCC,EAAAA,QAAQ,EAAC;AACLH,IAAAA,IAAI,EAACC;AADA,GAL0B;AAQnCG,EAAAA,IAAI,EAAC;AACDJ,IAAAA,IAAI,EAACC;AADJ,GAR8B;AAWnCI,EAAAA,KAAK,EAAC;AACFL,IAAAA,IAAI,EAACC;AADH;AAX6B,CAApB,CAAnB;AAgBAJ,UAAU,CAACS,IAAX,CAAgB,MAAhB,EAAwB,iBAAeC,GAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEhBC,UAAAA,OAAO,CAACC,GAAR,CAAY,KAAZ,EAAkBF,GAAlB;AAEIG,UAAAA,WAJY,GAIEd,UAAU,CAACe,eAAX,CAA2B;AACzCC,YAAAA,IAAI,EAAEC,OAAO,CAACC,GAAR,CAAYC,SADuB;AAEzCC,YAAAA,IAAI,EAAC;AACDC,cAAAA,IAAI,EAACJ,OAAO,CAACC,GAAR,CAAYI,SADhB;AAEDC,cAAAA,IAAI,EAACN,OAAO,CAACC,GAAR,CAAYM;AAFhB;AAFoC,WAA3B,CAJF;AAAA;AAAA,0CAYCV,WAAW,CAACW,QAAZ,CAAqB;AAClCC,YAAAA,IAAI,OAD8B;AAElCC,YAAAA,EAAE,EAAChB,GAAG,CAACF,KAF2B;AAGlCmB,YAAAA,OAAO,EAAC,iCAH0B;AAIlCC,YAAAA,IAAI,iEAAwDlB,GAAG,CAACJ,QAA5D,gBAAyEI,GAAG,CAACJ,QAA7E;AAJ8B,WAArB,CAZD;;AAAA;AAYZuB,UAAAA,IAZY;AAmBhBlB,UAAAA,OAAO,CAACC,GAAR,CAAY,MAAZ,EAAoBiB,IAApB;AAnBgB;AAAA;;AAAA;AAAA;AAAA;AAqBhBlB,UAAAA,OAAO,CAACmB,KAAR;;AArBgB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,CAAxB;AAyBA,IAAMC,IAAI,GAAGlC,QAAQ,CAACmC,KAAT,CAAe,MAAf,EAAsBhC,UAAtB,CAAb;AACAiC,MAAM,CAACC,OAAP,GAAiBH,IAAjB","sourcesContent":["const mongoose = require(\"mongoose\");\nconst nodemailer = require(\"nodemailer\");\n\n\nconst fileSchema = new mongoose.Schema({\n    name:{\n        type:String,\n        required:true,\n    },\n    imageUrl:{\n        type:String,\n    },\n    tags:{\n        type:String,\n    },\n    email:{\n        type:String,\n    },\n});\n\nfileSchema.post(\"save\", async function(doc){\n    try{\n        console.log(\"DOC\",doc);\n\n        let transporter = nodemailer.createTransport({\n            host: process.env.MAIL_HOST,\n            auth:{\n                user:process.env.MAIL_USER,\n                pass:process.env.MAIL_PASS,\n            },\n        });\n\n        let info = await transporter.sendMail({\n            from:`Web`,\n            to:doc.email,\n            subject:\"New file uploaded on cloudinary\",\n            html:`<h2>Hello</h2> <p>File uploaded View here: <a href=\"${doc.imageUrl}\">${doc.imageUrl}</a> </p>`\n\n        })\n        console.log(\"INFO\", info);\n    }catch(error){\n        console.error(error);\n    }\n})\n\nconst File = mongoose.model(\"File\",fileSchema);\nmodule.exports = File;"],"file":"File.dev.js"}