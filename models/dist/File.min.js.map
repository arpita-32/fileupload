{"version":3,"sources":["File.js"],"names":["mongoose","require","nodemailer","Schema","name","fileSchema","required","type","String","post","doc","transporter","info","regeneratorRuntime","async","_context","prev","next","console","log","createTransport","host","process","env","MAIL_HOST","auth","user","MAIL_USER","MAIL_PASS","awrap","pass","to","email","subject","html","concat","imageUrl","sent","t0","error","stop","model","File"],"mappings":"aAAA,IAAMA,SAAWC,QAAQ,YACnBC,WAAaD,QAAQ,cAArBC,WAAaD,IAAAA,SAAQE,OAA3B,CAIIC,KAAK,CADHC,KAAAA,OACGC,UAAA,GAEDA,SAAQ,CAHuBC,KAAAC,QAM/BD,KAAI,CAN2BA,KAAAC,QAS/BD,MAAKC,CAT0BD,KAAAC,UAAAH,WAAvCI,KAAA,OAAA,SAAAC,GAAA,IAAAC,EAAAC,EAAA,OAAAC,mBAAAC,MAAA,SAAAC,GAAA,OAAA,OAAAA,EAAAC,KAAAD,EAAAE,MAAA,KAAA,EAAA,OAAAF,EAAAC,KAAA,EAgBwBE,QAAAC,IAAA,MAAAT,GAAAC,EAAAT,WAAAkB,gBAAA,CAAAC,KAAAC,QAAAC,IAAAC,UAAAC,KAAA,CAAAC,KAAAJ,QAAAC,IAAAI,UAEhBT,KAAAI,QAAkBZ,IAAlBkB,aAlBRb,EAAAE,KAAA,EAAAJ,mBAAAgB,MAuBqBP,EAAYK,SADhB,CAEDG,KAAAA,MAFCC,GAAArB,EAAAsB,MANOC,QAAA,kCAAAC,KAAA,uDAAAC,OAAAzB,EAAA0B,SAAA,MAAAD,OAAAzB,EAAA0B,SAAA,gBAhBxB,KAAA,EAuBgBV,EAvBhBX,EAAAsB,KA8BYN,QAAGrB,IAAIsB,OAF2BpB,GA5B9CG,EAAAE,KAAA,GAAA,MAAA,KAAA,EAAAF,EAAAC,KAAA,EAAAD,EAAAuB,GAAAvB,EAAA,MAAA,GAgCYmB,QAAIK,MAAJL,EAAAA,IAhCZ,KAAA,GAAA,IAAA,MAAA,OAAAnB,EAAAyB,SAAA,KAAA,KAAA,CAAA,CAAA,EAAA,OA4BY5B,IAAAA,KAAAA,SAZY6B,MAAA,OAAApC,YAmBhBa,OAAAA,QAAOwB","file":"File.min.js","sourcesContent":["const mongoose = require(\"mongoose\");\nconst nodemailer = require(\"nodemailer\");\n\n\nconst fileSchema = new mongoose.Schema({\n    name:{\n        type:String,\n        required:true,\n    },\n    imageUrl:{\n        type:String,\n    },\n    tags:{\n        type:String,\n    },\n    email:{\n        type:String,\n    },\n});\n\nfileSchema.post(\"save\", async function(doc){\n    try{\n        console.log(\"DOC\",doc);\n\n        let transporter = nodemailer.createTransport({\n            host: process.env.MAIL_HOST,\n            auth:{\n                user:process.env.MAIL_USER,\n                pass:process.env.MAIL_PASS,\n            },\n        });\n\n        let info = await transporter.sendMail({\n            from:`Web`,\n            to:doc.email,\n            subject:\"New file uploaded on cloudinary\",\n            html:`<h2>Hello</h2> <p>File uploaded View here: <a href=\"${doc.imageUrl}\">${doc.imageUrl}</a> </p>`\n\n        })\n        console.log(\"INFO\", info);\n    }catch(error){\n        console.error(error);\n    }\n})\n\nconst File = mongoose.model(\"File\",fileSchema);\nmodule.exports = File;"]}